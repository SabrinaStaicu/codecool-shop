<!DOCTYPE html>
<html th:replace="product/index.html :: layout(~{::content})">
<!--<html th:replace="product/index.html :: index(~{content})">-->
<body>
<div th:fragment="content">
        <div class="card-body">
            <form action="/order_confirmation" method="post">
                <div class="row">
                        <div class="col-md-7">
                            <div class="left border">
                                <div class="row"> <span class="header">Payment</span>
                                    <div class="icons"> <img src="https://img.icons8.com/color/48/000000/visa.png" /> <img src="https://img.icons8.com/color/48/000000/mastercard-logo.png" /> <img src="https://img.icons8.com/color/48/000000/maestro.png" /> </div>
                                </div>
                                <div>
                                    <span>Cardholder's name:</span> <input type="text" name="card_holder_name" placeholder="Linda Williams"/>
                                    <span>Card Number:</span> <input type="text" name="card_number" placeholder="0125 6780 4567 9909"/>
                                    <div class="row">
                                        <div class="col-4"><span>Expiry date:</span> <input type="text" name="card_expiration_date" placeholder="YY/MM"/> </div>
                                        <div class="col-4"><span>CVV:</span> <input type="text" name="cvv"/> </div>
                                    </div> <input type="checkbox" id="save_card" class="align-left"> <label for="save_card">Save card details to wallet <em>(not implemented yet)</em></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5">

                                <div class="right border">
                                        <div class="header">Order Summary</div>
                                        <p th:text="${#lists.size(cart)} + ' items'">2 items</p>
                                        <div class="right border" th:each="cartProd,iterStat : ${cart}">
                                        <div class="row item">
                                            <div class="col-4 align-self-center"><img width="100%" th:attr="src='/static/img/product_' + ${cartProd.id} + '.jpg'" alt=""/></div>
                                            <div class="col-8">
                                                <div class="row" th:text="${cartProd.getPrice()}"><b>$ 26.99</b></div>
                                                <div class="row text-muted" th:text="${cartProd.name}">Be Legandary Lipstick-Nude rose</div>
                                                <div class="row">Qty:1</div>
                                            </div>
                                        </div>
                                        </div>
                                        <hr>
                                        <div class="row lower">
                                            <div class="col text-left">Subtotal</div>
                                            <div class="col text-right" th:text="${cartPriceSum}">$ 46.98</div>
                                        </div>
                                        <div class="row lower">
                                            <div class="col text-left">Delivery</div>
                                            <div class="col text-right">Free</div>
                                        </div>
                                        <div class="row lower">
                                            <div class="col text-left"><b>Total to pay</b></div>
                                            <div class="col text-right" th:text="${cartPriceSum}"><b>$ 46.98</b></div>
                                        </div>
                                        <div class="row lower"><button type="submit" class="btn btn-success">Place order</button></div>
                                </div>
                        </div>
                </div>
            </form>
        <div> </div>
    </div>
<!--    <script>-->
<!--        document.getElementById("placeOrder").addEventListener("click", function (e) {-->
<!--            e.preventDefault()-->
<!--            const xhr = new XMLHttpRequest(), formData = new FormData();-->
<!--            console.log(formData.entries());-->
<!--            // let cardHolderName = document.getElementById("cardholder_name").value;-->
<!--            // let cardExpirationDate = document.getElementById("card_expiration_date").value;-->
<!--            // let cardNumber = document.getElementById("card_number").value;-->
<!--            // let cvv = document.getElementById("cvv").value;-->
<!--            console.log("here");-->
<!--            console.log(document.getElementById("cardholder_name").value)-->
<!--            // formData.append("card_holder_name", document.getElementById("cardholder_name").value)-->
<!--            // formData.append("card_expiration_date", document.getElementById("card_expiration_date").value);-->
<!--            // formData.append("card_number", document.getElementById("card_number").value);-->
<!--            // formData.append("cvv", document.getElementById("cvv").value);-->
<!--            let urlEncodeData = "";-->
<!--            let urlEncodeDataPairs = [];-->
<!--            let name;-->

<!--            let data = {card_holder_name : document.getElementById("cardholder_name").value,-->
<!--                card_expiration_date : document.getElementById("card_expiration_date").value,-->
<!--                card_number : document.getElementById("card_number").value,-->
<!--                cvv : document.getElementById("cvv").value,};-->
<!--            console.log(data);-->
<!--            for (let key in data) {-->
<!--                formData.append(key, data[key]);-->
<!--            }-->
<!--            // for (name in data) {-->
<!--            //     urlEncodeDataPairs.push(encodeURIComponent(name) + '=' + encodeURIComponent(date[name]));-->
<!--            // }-->
<!--            //-->
<!--            // urlEncodeData = urlEncodeDataPairs.join('&').replace(/%20/g, '+');-->

<!--            xhr.open("POST", "/order_confirmation", true);-->
<!--            // xhr.setRequestHeader("Content-Type", "application/x-www-form-urlcoded");-->
<!--            xhr.send(formData);-->
<!--        })-->
<!--    </script>-->
</div>
</body>